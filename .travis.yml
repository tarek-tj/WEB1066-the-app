sudo: require
language: java
jdk:
  - openjdk8
  - openjdk9
before_install:
  - sudo apt-get update && sudo apt-get install jd
befor_script:
  - ./gradlew clean jar
env:
  - COVERAGE=0.0
#  - COVERAGE=0.25
#  - COVERAGE=0.30
services:
  - docker
stages:
  -test


jobs:
  include:
    - stage: test
      after_success:

        - $COVERAGE ./gradlew -p ./monolithic/ui check
  #      - $COVERAGE ./gradlew -p ./monolithic/service/cart check
  #      - $COVERAGE ./gradlew -p ./monolithic/service/user check

  #      - $COVERAGE ./gradlew -p ./monolithic/repository/order check
  #      - $COVERAGE ./gradlew -p ./monolithic/repository/cart check
  #      - $COVERAGE ./gradlew -p ./monolithic/repository/product check
  #      - $COVERAGE ./gradlew -p ./monolithic/repository/user check



deploy:
  provider: script

  script:
    - echo 'WIP'
    - bash -c "echo \"${DOCKER_PASSWORD}\" | docker login --username \"${DOCKER_LOGIN}\" --password-stdin"
    - docker push tarek47/web1066-the-app:firstpush
  DOCKER_LOGIN:
      global:
        secure: bLhRWgKJs/JmdWDbTCOgB+kbPj5GU6MjUCFjZpxKsKExsriGkWj5pf5ILFH0j8vkWKVGZph/ubeNPTHriH4Lhx9LT0jS6J7tXxNBH8CEgQX1pD4SMuxCNmpQNCgaJpFR8v4ioy38hBAOOO1dxZcxRJXJTomsYtPlRa3JpfrKLDjUlLxoeI1SB8P+roJ2pGYMrHMkh9JYm2hmlHJPjG1ukNvgDLnE2/OrBsvDnVHdNXkPG9/prxyhEih9igEI8asuph/Y+PlsZ2qvDomMZjHAv7D/6+WcQyXC4/DA1qOwNlRFheKTpr5i6V4WW7FNnAW5VEZqJQeIKnqXRBrhjFZntiilFSOqHfmb2Ie5GXdnVf0QaI4p9hLWzmXtd5c8zQlGO7b+RcbdREFX6hvcTWbtj19tXFxLaib7rs5u+3v0Fuafzs+uKoVmnXeQ7A9o2se7Yz4P9kdJic88XyecK9cf5RFyNvdZjBAJMNOUHPIXqImCf1iw644MPAUxQ+i2p/D8M0r0EOm+PLdRFJVHNMo5pfTmMBKF+td788gRsqoTFYD3LFDtoyDNgR8v/0nmDyXElb/UsLnY31xrCZI2eSUayI04BisalHO0wGcFQg+pun9jMiMKFdpQQeNIEDSFA3kX/3f6UsB27D/hBzDt1tgaMI/QHoCCQd4kkuqlLFH84to=


  DOCKER_PASSWORD:
      global:
        secure: KMYsEc02v6GZ8+h5svhtcGy0qF907wMa02FaWEEM9nuTOJpbPSJ5f8KbxaPr1LSPxWpYbiHVv9DMPmmXt+kKJhuKdz4csEmnRnJ5Eny0QruTWfn6Zaxausjby9ix7NeMTa/+PxPrZ7rRWIkAfg7w0sytCwyXgfSoAurQwRKeIybm3n1Epuz2LmJjIVxo+eEpeyOnsM5e0/qLjTMe2yO0f+z2wyssDpgtlVvu5i9goYyBka7LbT0h76CI+iORwrTM9FTkteusC1pndW17aBvFwNxSKyPqJDzuUVJP58vZUQeW9hbzrnklmF8xVAdzVPcFMC5w79c2copGRJMNQ1yS5fLsGeRApHyzjBZWDTw6dFwGghWMmJNV/vt0U0W0ALz0AHLzeD/IuVvlT6zPWAhJxZ3qeZSpTUtzxhLtic+ew2kfeRTzhqZ3XGwucxNm9AhfWliDR2oIV2M/Izucghlki7KS5Qu/2cOLxnc3fCYXwSqp3X7rLzwhklPEtUTlnNkWMZ0ch1bP2EiXg2c6WyI/jrzA53vTlIrmFpXWgvs4VbK6xrtigst6YjJ8pyTbY117tHt6k2k3Cle9BBXb57DzMPEkRqKt9Mxag6f4zUwyVx7lywMyx+OfrJaVbRLMLWTbTi7Czf0wTIkQXq/DWFhj+hXodDC1tJ7SaSsE0/DdJn8=


  on:

    all_branches: true





#install: "pip install -r requirements.txt"

#script:
  # Run ANSIBLE checks
  # - ANSIBLE0008: Disabled for use of sudo warnings - to address
  # - ANSIBLE0011: Disabled for all tasks which should be named
  # - ANSIBLE0012: Disabled (should not change if nothings needs doing) - to address
  # - ANSIBLE0013: Disabled - few uses of shell commands - to address
#  - find vagrant/provision -name "*.yml" -exec ansible-lint -x ANSIBLE008,ANSIBLE0011,ANSIBLE0012,ANSIBLE0013  {} +
